# üìä –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ù–ê–°–¢–†–û–ô–ö–ï DATA SOURCE –í GRAFANA

## ‚úÖ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

Data Source —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω —á–µ—Ä–µ–∑ provisioning –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é! –û–Ω –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–∏—Ç—å—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ Grafana.

### –®–∞–≥ 1: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Grafana (–µ—Å–ª–∏ Data Source –Ω–µ –ø–æ—è–≤–∏–ª—Å—è)

```bash
cd GRAFANA/grafana
docker-compose restart grafana
```

–ü–æ–¥–æ–∂–¥–∏—Ç–µ 10-15 —Å–µ–∫—É–Ω–¥ –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É Grafana.

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ Data Source

1. –û—Ç–∫—Ä–æ–π—Ç–µ Grafana: **http://localhost:3001**
   - –õ–æ–≥–∏–Ω: `admin`
   - –ü–∞—Ä–æ–ª—å: `admin123`

2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **Configuration ‚Üí Data Sources**

3. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å **InfluxDB** –≤ —Å–ø–∏—Å–∫–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö

4. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ **InfluxDB** –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
   - ‚úÖ URL: `http://influxdb:8086`
   - ‚úÖ Organization: `crypto`
   - ‚úÖ Default Bucket: `binance_data`

5. –ù–∞–∂–º–∏—Ç–µ **Save & Test** –≤–Ω–∏–∑—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   - –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∑–µ–ª–µ–Ω–∞—è –≥–∞–ª–æ—á–∫–∞ ‚úÖ "Data source is working"

---

## üîß –†–£–ß–ù–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê (–ï—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞)

### –®–∞–≥ 1: –û—Ç–∫—Ä—ã—Ç–∏–µ Grafana

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ: **http://localhost:3001**
2. –í–≤–µ–¥–∏—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
   - **Username:** `admin`
   - **Password:** `admin123`
3. –ù–∞–∂–º–∏—Ç–µ **Log In**

### –®–∞–≥ 2: –ù–∞–≤–∏–≥–∞—Ü–∏—è –∫ Data Sources

1. –í –ª–µ–≤–æ–º –º–µ–Ω—é –Ω–∞–π–¥–∏—Ç–µ –∏–∫–æ–Ω–∫—É **‚öôÔ∏è Configuration** (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
2. –ù–∞–≤–µ–¥–∏—Ç–µ –∫—É—Ä—Å–æ—Ä –Ω–∞ **Configuration**
3. –í –≤—ã–ø–∞–¥–∞—é—â–µ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **Data Sources**

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø—É—Ç—å:**
- –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É **‚öôÔ∏è** –≤ –ª–µ–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É
- –í—ã–±–µ—Ä–∏—Ç–µ **Data Sources**

### –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ Data Source

1. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ **Data Sources** –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **+ Add data source** (—Å–∏–Ω—è—è –∫–Ω–æ–ø–∫–∞ —Å–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É)

2. –í —Å–ø–∏—Å–∫–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö –Ω–∞–π–¥–∏—Ç–µ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ **InfluxDB**
   - –ú–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫ –≤–≤–µ—Ä—Ö—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã: –≤–≤–µ–¥–∏—Ç–µ "InfluxDB"

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è:

#### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

1. **Name:** `InfluxDB` (–∏–ª–∏ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ –∏–º—è)

2. **Query Language:** –≤—ã–±–µ—Ä–∏—Ç–µ **Flux**
   - –≠—Ç–æ –≤–∞–∂–Ω–æ! InfluxDB v2 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Flux, –∞ –Ω–µ InfluxQL

3. **URL:** `http://influxdb:8086`
   - ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `influxdb` (–∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞), –∞ –Ω–µ `localhost`!
   - –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏ Docker —Å–µ—Ç–∏
   - –ï—Å–ª–∏ Grafana –∑–∞–ø—É—â–µ–Ω –≤–Ω–µ Docker, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: `http://localhost:8086`

4. **Organization:** `crypto`
   - –ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏–∑ docker-compose.yml

5. **Token:** `my-super-secret-admin-token`
   - –¢–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ –∫ InfluxDB

6. **Default Bucket:** `binance_data`
   - Bucket, –∫—É–¥–∞ –º—ã –∑–∞–≥—Ä—É–∑–∏–ª–∏ –¥–∞–Ω–Ω—ã–µ

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):

- **Min time interval:** –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `15m` (–¥–ª—è 15-–º–∏–Ω—É—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
- **Max series:** –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º

### –®–∞–≥ 5: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–Ω–∏–∑

2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **Save & Test** (—Å–∏–Ω—è—è –∫–Ω–æ–ø–∫–∞ –≤–Ω–∏–∑—É)

3. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ:
   - ‚úÖ **"Data source is working"** (–∑–µ–ª–µ–Ω–∞—è –≥–∞–ª–æ—á–∫–∞)
   - –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ!

4. –ï—Å–ª–∏ –ø–æ—è–≤–∏–ª–∞—Å—å –æ—à–∏–±–∫–∞:
   - ‚ùå –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ InfluxDB –∑–∞–ø—É—â–µ–Ω: `docker ps | findstr influxdb`
   - ‚ùå –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `http://influxdb:8086`)
   - ‚ùå –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `my-super-secret-admin-token`)
   - ‚ùå –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Organization (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å `crypto`)

---

## üß™ –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–´ DATA SOURCE

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Data Source —Å—Ç—Ä–∞–Ω–∏—Ü—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Configuration ‚Üí Data Sources ‚Üí InfluxDB**
2. –ù–∞–∂–º–∏—Ç–µ **Save & Test**
3. –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∑–µ–ª–µ–Ω–∞—è –≥–∞–ª–æ—á–∫–∞ ‚úÖ

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞–Ω–µ–ª–∏

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Dashboard: **Dashboards ‚Üí New ‚Üí New Dashboard**
2. –ù–∞–∂–º–∏—Ç–µ **Add visualization**
3. –í—ã–±–µ—Ä–∏—Ç–µ **InfluxDB** –≤ –∫–∞—á–µ—Å—Ç–≤–µ Data Source
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—Å—Ç–æ–π Flux –∑–∞–ø—Ä–æ—Å:

```flux
from(bucket: "binance_data")
  |> range(start: -1h)
  |> filter(fn: (r) => r["_measurement"] == "ohlcv")
  |> filter(fn: (r) => r["symbol"] == "BTCUSDT")
  |> filter(fn: (r) => r["_field"] == "close")
```

–ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫, –∑–Ω–∞—á–∏—Ç Data Source —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ!

**üìñ –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Flux –∑–∞–ø—Ä–æ—Å—ã –≤ Grafana:** —Å–º. `HOW_TO_USE_FLUX_QUERY.md`

---

## üìã –¢–ï–ö–£–©–ò–ï –ù–ê–°–¢–†–û–ô–ö–ò DATA SOURCE

–°–ª–µ–¥—É—é—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –≤ —Ñ–∞–π–ª–µ `GRAFANA/grafana/datasources/influxdb.yml`:

```yaml
Name: InfluxDB
Type: influxdb
URL: http://influxdb:8086
Organization: crypto
Token: my-super-secret-admin-token
Default Bucket: binance_data
Query Language: Flux
```

---

## üîç –£–°–¢–†–ê–ù–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú

### –ü—Ä–æ–±–ª–µ–º–∞: "Unable to connect to InfluxDB"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ InfluxDB –∑–∞–ø—É—â–µ–Ω:
   ```bash
   docker ps | findstr influxdb
   ```
   –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "Up"

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ InfluxDB:
   ```bash
   docker logs influxdb
   ```

3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π:
   - –í–Ω—É—Ç—Ä–∏ Docker: `http://influxdb:8086`
   - –í–Ω–µ Docker: `http://localhost:8086`

### –ü—Ä–æ–±–ª–µ–º–∞: "Invalid token"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ docker-compose.yml:
   ```yaml
   DOCKER_INFLUXDB_INIT_ADMIN_TOKEN: my-super-secret-admin-token
   ```

2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –≤ Grafana —Ç–æ—á–Ω–æ —Ç–∞–∫–æ–π –∂–µ (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)

### –ü—Ä–æ–±–ª–µ–º: "Organization not found"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –≤ docker-compose.yml:
   ```yaml
   DOCKER_INFLUXDB_INIT_ORG: crypto
   ```

2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞. –û—Ç–∫—Ä–æ–π—Ç–µ InfluxDB UI:
   - URL: http://localhost:8086
   - –õ–æ–≥–∏–Ω: `admin`
   - –ü–∞—Ä–æ–ª—å: `admin123`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è `crypto` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: "Bucket not found"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ bucket –≤ docker-compose.yml:
   ```yaml
   DOCKER_INFLUXDB_INIT_BUCKET: binance_data
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã:
   - –û—Ç–∫—Ä–æ–π—Ç–µ InfluxDB UI: http://localhost:8086
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Data Explorer**
   - –í—ã–±–µ—Ä–∏—Ç–µ bucket `binance_data`
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–∞–Ω–Ω—ã–µ —Å measurement `ohlcv`

---

## ‚úÖ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Data Source –≤—ã –º–æ–∂–µ—Ç–µ:

1. **–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π –¥–∞—à–±–æ—Ä–¥** - –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ BTC
2. **–î–æ–±–∞–≤–∏—Ç—å –ø–∞–Ω–µ–ª–∏** - –≥—Ä–∞—Ñ–∏–∫–∏ —Ü–µ–Ω—ã, –æ–±—ä–µ–º–∞, OHLC —Å–≤–µ—á–∏
3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞–º–∏
4. **–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞—à–±–æ—Ä–¥** - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ JSON —Ñ–∞–π–ª

–ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: —Å–º. `QUICK_START_15M.md` (–®–ê–ì 5)

---

## üìö –ü–û–õ–ï–ó–ù–´–ï –°–°–´–õ–ö–ò

- **Grafana –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://grafana.com/docs/grafana/latest/datasources/influxdb/
- **InfluxDB Flux –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://docs.influxdata.com/flux/
- **–ü—Ä–∏–º–µ—Ä—ã Flux –∑–∞–ø—Ä–æ—Å–æ–≤:** —Å–º. `QUICK_START_15M.md`

---

**–ì–æ—Ç–æ–≤–æ! Data Source –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

